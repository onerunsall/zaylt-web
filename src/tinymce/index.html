<!DOCTYPE html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />

<head>
  <script src="./js/tinymce/tinymce.min.js"></script>
  <script src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>

  <style>
    .submit-btn {
      width: 100%;
      height: 30px;
      border-radius: 10px;
      background: #4a7bd4;
      color: #fff;
      margin-top: 20px;
      border: none;
    }
  </style>
</head>

<body>
  <div id="app">
    <textarea id="tinydemo" v-mode="content"></textarea>

    <button class="submit-btn" @click="submit">提交</button>
  </div>
</body>
<script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.9/vue.min.js"></script>
<script>

  tinymce.init({
    selector: '#tinydemo',
    language: 'zh_CN',
    height: 600,
  })
  console.log(tinymce)
  console.log('mounted')
  var url = window.location.href;
  var dz_url = url.split('#')[0];
  var cs = dz_url.split('?')[1];
  var cs_arr = cs.split('&')
  var cs = {};

  for (var i = 0; i < cs_arr.length; i++) {

    cs[cs_arr[i].split('=')[0]] = cs_arr[i].split('=')[1]
  }
  console.log(cs)

  new Vue({
    el: '#app',
    data() {
      return {
        content: '321321 '
      }
    },


    methods: {
      submit() {
        let data = tinyMCE.activeEditor.getContent()
        if (data) {
          wx.miniProgram.postMessage({
            data
          })
          wx.miniProgram.navigateTo({
            url: '/pages/test/test?data=' + data
          });
        }
      }
    },
  })


</script>

</html>