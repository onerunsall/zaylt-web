<!DOCTYPE html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />

<head>
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="./js/tinymce/tinymce.min.js"></script>
  <script src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>

  <style>
    .submit-btn {
      width: 100%;
      height: 30px;
      border-radius: 10px;
      background: #4a7bd4;
      color: #fff;
      margin-top: 20px;
      border: none;
    }
  </style>
</head>

<body>
  <textarea id="tinydemo">Hello, World!</textarea>

  <button class="submit-btn" onclick="submit()">提交</button>
</body>
<script>
  const URL = $.getUrlParam('url') //要跳转的页面 
  const CONTENT = $.getUrlParam('content')//接收小程序传来的参数

  console.log(URL)
  console.log(CONTENT)

  tinymce.init({
    selector: '#tinydemo',
    language: 'zh_CN',
    height: 600,
  });

  $('#tinydemo').html(CONTENT)
  function submit() {

    let data = tinyMCE.activeEditor.getContent()
    if (data) {
      wx.miniProgram.postMessage({
        data
      })
      wx.miniProgram.navigateTo({
        url: URL + '?data=' + data
      });
    }
  }
</script>

</html>